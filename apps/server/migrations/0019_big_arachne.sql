DROP MATERIALIZED VIEW "public"."event_summary";--> statement-breakpoint
CREATE MATERIALIZED VIEW "public"."event_summary" WITH (autovacuum_enabled = true) AS (select "events"."id", "events"."user_id", "events"."name", "events"."type", "addresses"."city", "addresses"."region", "events"."start_date", "events"."end_date", "events_details"."type_specific_data", "events_details"."participants", "events"."slots", "events"."remaining_slots", "events"."free", "events"."price", "events"."created_at" from "events" inner join "users" on "events"."user_id" = "users"."id" inner join "events_details" on "events"."id" = "events_details"."event_id" inner join "address_links" on "events"."id" = "address_links"."event_id" inner join "addresses" on "address_links"."address_id" = "addresses"."id" where "events"."remaining_slots" > 0);